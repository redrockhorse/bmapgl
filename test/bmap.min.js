!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bmap={},t.echarts)}(this,(function(t,e){"use strict";function n(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var o=n(e);function r(){const t=["1225152tgZUIA","Only one bmap component can exist","convertToPixel","eachComponent","_center","initialize","getViewportRootOffset","getViewportRoot","removeChild","dimensions","querySelector","__bmap","coordinateSystem","bind","prepareCustoms",".ec-extension-bmap","clone","prototype","getViewRect","center","addOverlay","mapType","width","getBMap","294702NMlNXm","pointToOverlayPixel","getZr","centerOrZoomChanged","painter","Overlay","convertFromPixel","undefined","appendChild","top","Point","lat","bmap","_bmap","5827452lGlEwr","overlayPixelToPoint","30326751xGMGLL","cssText","labelPane","draw","Map","centerAndZoom","0px","setMapOffset","getWidth","getCenter","zoom","_api","create","2658460QYNALQ","dataToPoint","_root","style","lng","createElement","9377032rHqnUa","pointToData","BoundingRect","setZoom","getDom","_mapOffset","getZoom","type","div","3584DqPqVj","42umfHZD","get","__mapOffset","BMapGL api is not loaded","getHeight","812UcLlmk","pointToPixel"];return(r=function(){return t})()}const s=i;function i(t,e){const n=r();return(i=function(t,e){return n[t-=241]})(t,e)}function a(t,e){const n=i;this[n(293)]=t,this[n(265)]=[n(313),n(291)],this._mapOffset=[0,0],this[n(307)]=e}function c(t,n){return n=n||[0,0],e.util.map([0,1],(function(e){const o=i,r=n[e],s=t[e]/2,a=[],c=[];return a[e]=r-s,c[e]=r+s,a[1-e]=c[1-e]=n[1-e],Math.abs(this[o(310)](a)[e]-this.dataToPoint(c)[e])}),this)}let p;!function(t,e){const n=i,o=t();for(;;)try{if(838107===parseInt(n(248))/1*(-parseInt(n(254))/2)+-parseInt(n(280))/3+-parseInt(n(294))/4+parseInt(n(309))/5+parseInt(n(256))/6*(-parseInt(n(249))/7)+parseInt(n(315))/8+parseInt(n(296))/9)break;o.push(o.shift())}catch(t){o.push(o.shift())}}(r),a[s(273)][s(246)]=s(292),a.prototype[s(265)]=[s(313),s(291)],a[s(273)][s(242)]=function(t){this._zoom=t},a[s(273)].setCenter=function(t){const e=s;this[e(260)]=this._bmap[e(255)](new(BMapGL[e(290)])(t[0],t[1]))},a[s(273)].setMapOffset=function(t){this[s(244)]=t},a[s(273)][s(279)]=function(){return this._bmap},a[s(273)][s(310)]=function(t){const e=s,n=new(BMapGL[e(290)])(t[0],t[1]),o=this._bmap[e(281)](n),r=this[e(244)];return[o.x-r[0],o.y-r[1]]},a.prototype[s(316)]=function(t){const e=s,n=this[e(244)];return[(t=this[e(293)][e(295)]({x:t[0]+n[0],y:t[1]+n[1]}))[e(313)],t[e(291)]]},a[s(273)].getViewRect=function(){const t=s,n=this[t(307)];return new(e.graphic[t(241)])(0,0,n[t(304)](),n[t(253)]())},a[s(273)].getRoamTransform=function(){const t=s;return e.matrix[t(308)]()},a[s(273)][s(270)]=function(){const t=s,n=this[t(274)]();return{coordSys:{type:"bmap",x:n.x,y:n.y,width:n[t(278)],height:n.height},api:{coord:e.util[t(269)](this[t(310)],this),size:e.util[t(269)](c,this)}}},a[s(273)][s(258)]=function(t,e,n){return this[s(310)](n)},a[s(273)][s(286)]=function(t,e,n){return this[s(316)](n)},a[s(265)]=a[s(273)][s(265)],a.create=function(t,n){const o=s;let r;const c=n[o(243)]();return t[o(259)](o(292),(function(t){const u=o,f=n[u(282)]()[u(284)],l=f[u(263)]();if(typeof BMapGL===u(287))throw new Error(u(252));if(p=p||function(){const t=s;function e(t){this[i(311)]=t}return e.prototype=new(BMapGL[t(285)]),e[t(273)][t(261)]=function(e){const n=t;return e.getPanes()[n(298)][n(288)](this[n(311)]),this._root},e[t(273)][t(299)]=function(){},e}(),r)throw new Error(u(257));let m;if(!t[u(267)]){let n=c[u(266)](u(271));n&&(l.style.left="0px",l[u(312)][u(289)]=u(302),c[u(264)](n)),n=document[u(314)](u(247)),n.className="ec-extension-bmap",n[u(312)][u(297)]="position:absolute;width:100%;height:100%",c[u(288)](n);let o=t[u(250)]("mapOptions");o&&(o=e.util[u(272)](o),delete o[u(277)]),m=t[u(267)]=new(BMapGL[u(300)])(n,o);const r=new p(l);m[u(276)](r),f[u(262)]=function(){return{offsetLeft:0,offsetTop:0}}}m=t[u(267)];const h=t.get(u(275)),d=t[u(250)](u(306));if(h&&d){const e=m[u(305)](),n=m[u(245)]();if(t[u(283)]([e[u(313)],e.lat],n)){const t=new BMapGL.Point(h[0],h[1]);m[u(301)](t,d)}}r=new a(m,n),r[u(303)](t[u(251)]||[0,0]),r[u(242)](d),r.setCenter(h),t[u(268)]=r})),t.eachSeries((function(t){const e=o;t[e(250)](e(268))===e(292)&&(t.coordinateSystem=r)})),r&&[r]};const u=l;function f(){const t=["extendComponentModel","15CDacHc","313116uBWMVQ","4326721AHfJUG","1737110OhaCVL","95368VbaTuP","2681852jdlbeq","83056crNYTP","11abegkx","center","8582736ztrjKE","zoom","3RUVOXz","option","3FoRseb","__bmap","504Kwvsow"];return(f=function(){return t})()}function l(t,e){const n=f();return(l=function(t,e){return n[t-=152]})(t,e)}!function(t,e){const n=l,o=t();for(;;)try{if(360615===-parseInt(n(153))/1*(-parseInt(n(163))/2)+-parseInt(n(168))/3*(-parseInt(n(162))/4)+parseInt(n(157))/5*(parseInt(n(158))/6)+parseInt(n(159))/7+-parseInt(n(161))/8*(parseInt(n(155))/9)+-parseInt(n(160))/10*(-parseInt(n(164))/11)+-parseInt(n(166))/12)break;o.push(o.shift())}catch(t){o.push(o.shift())}}(f),o[u(156)]({type:"bmap",getBMap:function(){return this[u(154)]},setCenterAndZoom:function(t,e){const n=u;this[n(152)][n(165)]=t,this[n(152)][n(167)]=e},centerOrZoomChanged:function(t,e){const n=u,o=this[n(152)];return r=t,s=o[n(165)],!(r&&s&&r[0]===s[0]&&r[1]===s[1]&&e===o.zoom);var r,s},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}});const m=h;function h(t,e){const n=d();return(h=function(t,e){return n[t-=235]})(t,e)}function d(){const t=["1779216BvpPwu","1336252VBDXvf","setMapStyleV2","getBMap","stringify","parentNode","918510PHICmQ","__mapStyle","disableDragging","dispatchAction","hasOwnProperty","painter","45DevFBn","removeEventListener","top","coordinateSystem","__mapStyle2","823833tuRFOG","moving","3894708UqJuYd","2511150IOSdIy","util","getViewportRoot","zoomend","moveend","parse","roam","style","clone","7clMLtr","bmap","left","_oldZoomEndHandler","84420Ljpueo","getZr","enablePinchToZoom","enableDoubleClickZoom","addEventListener","get","scale","disablePinchToZoom"];return(d=function(){return t})()}function y(t){const e=h;for(const n in t)if(t[e(265)](n))return!1;return!0}function g(t,e){const n=I();return(g=function(t,e){return n[t-=383]})(t,e)}!function(t,e){const n=h,o=t();for(;;)try{if(423258===-parseInt(n(272))/1+parseInt(n(256))/2+parseInt(n(275))/3+parseInt(n(247))/4+parseInt(n(261))/5+parseInt(n(274))/6*(parseInt(n(243))/7)+-parseInt(n(255))/8*(parseInt(n(267))/9))break;o.push(o.shift())}catch(t){o.push(o.shift())}}(d),o.extendComponentView({type:m(244),render:function(t,e,n){const r=m;let s=!0;const i=t[r(258)](),a=n[r(248)]()[r(266)][r(236)](),c=t[r(270)],p=function(e,o){const i=r;if(s)return;const p=a[i(260)][i(260)][i(260)],u=[-parseInt(p[i(241)][i(245)],10)||0,-parseInt(p.style[i(269)],10)||0],f=a[i(241)],l=u[0]+"px",m=u[1]+"px";f.left!==l&&(f[i(245)]=l),f[i(269)]!==m&&(f[i(269)]=m),c.setMapOffset(u),t.__mapOffset=u,n[i(264)]({type:"bmapRoam",animation:{duration:0}})};function u(){s||n[r(264)]({type:"bmapRoam",animation:{duration:0}})}i[r(268)]("moving",this._oldMoveHandler),i[r(268)](r(238),this._oldMoveHandler),i.removeEventListener(r(237),this[r(246)]),i[r(251)](r(273),p),i[r(251)](r(238),p),i[r(251)](r(237),u),this._oldMoveHandler=p,this[r(246)]=u;const f=t.get(r(240));f&&f!==r(253)?i.enableDragging():i[r(263)](),f&&"move"!==f?(i.enableScrollWheelZoom(),i[r(250)](),i[r(249)]()):(i.disableScrollWheelZoom(),i.disableDoubleClickZoom(),i[r(254)]());const l=t[r(262)],h=t[r(252)]("mapStyle")||{},d=JSON.stringify(h);JSON[r(259)](l)!==d&&(!y(h)&&i.setMapStyleV2(o.util[r(242)](h)),t.__mapStyle=JSON[r(239)](d));const g=t[r(271)],b=t.get("mapStyleV2")||{},I=JSON[r(259)](b);JSON[r(259)](g)!==I&&(!y(b)&&i[r(257)](o[r(235)][r(242)](b)),t.__mapStyle2=JSON.parse(I)),s=!1}});const b=g;function I(){const t=["800WmkdGa","25986pOSwMm","6kYbxTy","9913768GiHwyd","153Dcekyg","80440rPrYky","1.0.0","getZoom","eachComponent","16316qYMEsU","bmap","6412763FcUmWb","getBMap","22WBNvxZ","3407136DcVJzB","registerAction","lng","285261kjoIjP","288NWyLmY","setCenterAndZoom","registerCoordinateSystem","getCenter","bmapRoam"];return(I=function(){return t})()}!function(t,e){const n=g,o=t();for(;;)try{if(690919===-parseInt(n(402))/1+parseInt(n(386))/2*(parseInt(n(403))/3)+parseInt(n(394))/4*(-parseInt(n(385))/5)+-parseInt(n(387))/6*(-parseInt(n(396))/7)+-parseInt(n(388))/8+parseInt(n(389))/9*(parseInt(n(390))/10)+-parseInt(n(398))/11*(-parseInt(n(399))/12))break;o.push(o.shift())}catch(t){o.push(o.shift())}}(I),o[b(405)]("bmap",a),o[b(400)]({type:b(384),event:b(384),update:"updateLayout"},(function(t,e){const n=b;e[n(393)](n(395),(function(t){const e=n,o=t[e(397)](),r=o[e(383)]();t[e(404)]([r[e(401)],r.lat],o[e(392)]())}))}));const O=b(391);t.version=O}));
